---
title: 테스트에 대한 생각 
date: '2020-05-05T01:01:03.284Z'
draft: true
slug: "thought-for-test"
category: "Dev"
tags:
  - "test"
description: "개발을 업으로 삼기 전부터 자동화 테스트와 TDD에 대해 접할 수 있었다."
socialImage: ""
---

# 테스트는 어렵다

 개발을 업으로 삼기 전부터 자동화 테스트와 TDD에 대해 접할 수 있었다.

 알고리즘 스터디를 참여했을 때 스터디를 이끌었던 분이 TDD 방식으로 알고리즘을 구현한다고 했던 것을 계기로 TDD 라는 용어를 처음 알게 되었다.

 그 후 켄트 백의 테스트 주도 개발을 1장만 읽고 나서, '테스트를 먼저 작성한다' 가 말도 안 되는 이야기가 아니라는 것을 알게 되었고 이런 방식이 그럭저럭 공부하고 연구할 가치가 있다고 생각했다.

 그때까지만 해도 '그럭저럭' 가치가 있다고 생각했던 것이었는데 지금은 필수적인 것으로 여기고 있다. 레거시 코드를 리팩토링했던 것이 버그를 만들고 그것으로 약 일주일동안 서비스가 기이하게 고장나는 것을 겪었기 때문이다.

 사실 나는 프로덕션 코드 배포에 대해 상당한 부담을 느끼며 언제나 배포 전에 편집증적인 수동 테스트를 거친다. 그런데 이런 작업들이 내겐 상당한 피로로 다가왔고 최근 들어서는 배포 자체를 스트레스로 여기는 정도로 다가왔다.

 그래서 자동화 테스트에 대한 필요성을 절실히 느끼는 데에도 불구하고, 이번에 이렇게 버그로 몸살을 앓고 난 이후에도, 여전히 자동화 테스트를 프로덕션에 적용하지 못하고 있다.

 나는 그 이유에 대해서 이렇게 생각한다.

> 비용적 측면을 논외로 두더라도, 테스트 코드는 그 자체가 작성하기 어렵기 때문에 쉽게 현업에 적용하지 못한다.

# 왜 어려운가

### 어플리케이션 실제 구동 없이 테스트하기

 먼저 테스트 코드는 실행 자체부터가 신기한 것이다.

 아마 대다수의 개발자는 자동화 테스트를 수행하지 않더라도 테스트 자체는 분명히 거칠 것이다. 때로는 테스트도 거치지 않는 미친 개발자가 있긴 하지만, 보통은 자신이 수동으로 테스트를 거친 후 커밋을 한다.

 수동 테스트는 두 가지 방법으로 가능하다. 개발자가 사용자 입장이 되어 직접 operation 을 수행한다. 또는 프로덕션 코드에는 적용하지 않을 함수들을 만든 후 *서비스를 실행해서* 점검한다.

 즉, 수동 테스트는 두 가지 방법 모두 다음을 전제로 둔다.

> 서비스를 실행한다. 다시 말해, 어플리케이션을 프로덕션처럼 구동한다.

 하지만 테스트 코드는 어플리케이션의 구동을 요구하지 않는다.

 이 특징이야말로 테스트 코드가 굉장히 신기한 어떤 것이고, 또 작성하는 것을 어렵게 만드는 것으로 만드는 것이라 할 수 있다.
